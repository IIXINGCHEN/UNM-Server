<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <title>UNM-Server - API 文档</title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    </head>

<body>
    <div class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </div>

    <div class="particles" id="particles"></div>

    <main>
        <div class="title" style="margin-bottom: 1rem;">UNM-Server API</div>
        <p style="color: var(--text-color-gray); max-width: 600px; margin-bottom: 2rem;">
            一个简洁的音乐 API 服务，整合了 GDStudio API 和 UnblockNeteaseMusic 的核心功能，提供音乐搜索、链接获取、封面、歌词以及音源解锁服务。
        </p>
        <div class="control">
             <a href="#api-documentation" class="button-link">
                <i class="fas fa-book-open"></i>
                <span>查看API文档</span>
            </a>
            <a href="https://github.com/your-repo/unm-server" target="_blank" class="button-link" id="viewOnGithub">
                <i class="fab fa-github"></i>
                <span>View on GitHub</span>
            </a>
        </div>
        <div id="test-result-container" class="result-container" style="display: none;">
             </div>
    </main>

    <section class="api-docs-section" id="api-documentation">
        <h2>API 使用文档</h2>
        <p style="margin-bottom:1.5rem;">所有接口均返回统一的 JSON 结构: <code>{ "code": &lt;状态码&gt;, "message": "&lt;消息&gt;", "data": &lt;数据对象或null&gt; }</code>。点击下方示例 URL 可在新窗口中测试对应接口。</p>

        <article class="api-endpoint">
            <h3>GET /</h3>
            <p>API 根路径，返回服务的欢迎信息、版本号和状态。</p>
            <strong>参数:</strong>
            <p>无</p>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "API 服务运行中",
    "data": {
        "greeting": "Welcome to the Music API!",
        "version": "1.0.6",
        "documentation_url": "/public/api-docs.html",
        "status": "API Service is running"
    }
}</code></pre>
        </article>

        <article class="api-endpoint">
            <h3>GET /info</h3>
            <p>获取 API 服务的详细配置和状态信息。</p>
            <strong>参数:</strong>
            <p>无</p>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/info" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/info</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "API 信息获取成功",
    "data": {
        "version": "1.0.6",
        "proxy_enabled": true,
        "enable_flac": true,
        // ... 其他配置项如文档所示
        "cache_enabled": true,
        "cache_default_ttl_seconds": 3600
    }
}</code></pre>
        </article>
        
        <article class="api-endpoint">
            <h3>GET /test</h3>
            <p>使用预设歌曲 ID 测试 <code>@unblockneteasemusic/server</code> 的核心解锁功能，并返回获取到的音源信息。</p>
            <strong>参数:</strong>
            <p>无</p>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/test" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/test</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "获取成功",
    "data": {
        "url": "http://example.com/song.mp3",
        "br": 320000,
        "size": 10485760,
        "type": "mp3",
        "md5": "...",
        "source": "kuwo" 
    }
}</code></pre>
            <p>如果结果来自缓存，<code>message</code> 会包含 "(from cache)"。</p>
        </article>

        <article class="api-endpoint">
            <h3>GET /search</h3>
            <p>根据关键字搜索歌曲 (基于 GDStudio API)。</p>
            <strong>参数:</strong>
            <ul>
                <li><code>name</code>: <strong>(必需)</strong> 搜索关键字。</li>
                <li><code>source</code>: (可选) 指定音乐源 (如 <code>netease</code>, <code>kugou</code>等)。默认为配置的默认源。</li>
                <li><code>count</code>: (可选) 返回结果数量，默认为 <code>20</code>。</li>
                <li><code>pages</code>: (可选) 返回结果页码，默认为 <code>1</code>。</li>
            </ul>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/search?name=七里香&amp;source=netease&amp;count=5" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/search?name=七里香&amp;source=netease&amp;count=5</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "请求成功 (源: netease)",
    "data": [
        {
            "id": "歌曲ID1",
            "name": "七里香",
            "artist": "周杰伦",
            /* ... 其他字段 ... */
            "source": "netease"
        }
    ]
}</code></pre>
            <p>如果原始请求的源失败，服务器会自动尝试回退到配置的回退源。</p>
        </article>

        <article class="api-endpoint">
            <h3>GET /url</h3>
            <p>获取指定歌曲 ID 的播放链接 (基于 GDStudio API)。</p>
            <strong>参数:</strong>
            <ul>
                <li><code>id</code>: <strong>(必需)</strong> 歌曲的 Track ID。</li>
                <li><code>source</code>: (可选) 指定音乐源。默认为配置的默认源。</li>
                <li><code>br</code>: (可选) 请求的音质 (<code>128</code>, <code>192</code>, <code>320</code>, <code>740</code>, <code>999</code>)。默认为 <code>999</code>。</li>
            </ul>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/url?id=12345&amp;source=kuwo&amp;br=320" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/url?id=12345&amp;source=kuwo&amp;br=320</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "请求成功 (源: kuwo)",
    "data": {
        "id": "12345",
        "br": 320000, 
        "url": "http://example.com/song.mp3",
        "source": "kuwo"
        /* proxyUrl (如果适用) */
    }
}</code></pre>
        </article>

        <article class="api-endpoint">
            <h3>GET /pic</h3>
            <p>获取指定专辑图 ID 的图片链接 (基于 GDStudio API)。</p>
            <strong>参数:</strong>
            <ul>
                <li><code>id</code>: <strong>(必需)</strong> 专辑图的 Pic ID (来自 <code>/search</code> 结果的 <code>pic_id</code>)。</li>
                <li><code>source</code>: (可选) 指定音乐源。默认为配置的默认源。</li>
                <li><code>size</code>: (可选) 图片尺寸 (<code>300</code> 或 <code>500</code>)。默认为 <code>300</code>。</li>
            </ul>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/pic?id=pic123&amp;source=kugou&amp;size=500" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/pic?id=pic123&amp;source=kugou&amp;size=500</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "请求成功 (源: kugou)",
    "data": {
        "url": "http://example.com/album.jpg",
        "source": "kugou"
    }
}</code></pre>
        </article>

        <article class="api-endpoint">
            <h3>GET /lyric</h3>
            <p>获取指定歌词 ID 的歌词内容 (基于 GDStudio API)。</p>
            <strong>参数:</strong>
            <ul>
                <li><code>id</code>: <strong>(必需)</strong> 歌词的 Lyric ID (来自 <code>/search</code> 结果的 <code>lyric_id</code>)。</li>
                <li><code>source</code>: (可选) 指定音乐源。默认为配置的默认源。</li>
            </ul>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/lyric?id=lyric123&amp;source=qq" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/lyric?id=lyric123&amp;source=qq</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "请求成功 (源: qq)",
    "data": {
        "lyric": "[00:00.00]歌词...",
        "tlyric": "[00:00.00]翻译...",
        "source": "qq"
    }
}</code></pre>
        </article>

        <article class="api-endpoint">
            <h3>GET /match</h3>
            <p>根据歌曲 ID 尝试从多个音源匹配可播放链接 (直接调用 <code>@unblockneteasemusic/server</code>)。</p>
            <strong>参数:</strong>
            <ul>
                <li><code>id</code>: <strong>(必需)</strong> 歌曲的 ID。</li>
                <li><code>server</code>: (可选) 指定音源列表（逗号分隔, 如 <code>kuwo,migu</code>）。默认为配置的 `UNM_SETTINGS.defaultSources`。</li>
            </ul>
            <strong>示例 (点击在新窗口打开):</strong>
            <pre><code><a class="api-example-link" href="[你的域名]/match?id=song987&amp;server=kuwo,qq" target="_blank" title="在新窗口中打开示例链接"><span class="domain-placeholder">[你的域名]</span>/match?id=song987&amp;server=kuwo,qq</a></code></pre>
            <strong>成功响应 (示例):</strong>
            <pre><code>{
    "code": 200,
    "message": "匹配成功",
    "data": {
        "url": "http://example.com/matched.mp3",
        /* ... 其他字段如 br, size, type, md5 ... */
        "source": "kuwo",
        /* proxyUrl (如果适用) */
    }
}</code></pre>
        </article>
    </section>

    <footer>
        <div class="social">
            <i class="fa-brands fa-github" onclick="socialJump('github')" title="GitHub"></i>
            <i class="fa-solid fa-house" onclick="socialJump('home')" title="主页"></i>
            <i class="fa-solid fa-envelope" onclick="socialJump('email')" title="邮件联系"></i>
        </div>
        <div class="power">
            Copyright © 2020
            <script>
                document.write(" - " + new Date().getFullYear());
            </script>
            <a href="https://imsyy.top/" target="_blank">imsyy.top</a>
        </div>
        <div class="icp">
            <a href="https://beian.miit.gov.cn/" target="_blank">Copyright@ Focalors - 2025</a>
        </div>
    </footer>

    <script src="/script.js" defer></script>
</body>

</html>
